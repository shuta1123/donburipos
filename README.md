# 注文・制作管理システム（架空飲食店）

どんぶり・ジュースなどを販売する架空の飲食店を想定し、  
**注文 → 制作 → 取りまとめ → 提供** の流れを管理するシステム。

店員が注文を入力し、  
丼担当・ドリンク担当に分かれて商品を制作し、  
最終的に商品を提供する店舗オペレーションを想定している。

本システムでは、  
**画面上の表示が消えても、注文データはすべて保持**し、  
将来的な **売上管理・在庫管理** への拡張を前提としている。

---

## 使用技術
- フロントエンド：React
- バックエンド：PHP
- 開発環境：MAMP

---

## システム全体フロー

```mermaid
flowchart LR
  Z[注文・会計<br/>(店員)]
  A[商品作成A<br/>(丼)]
  B[商品作成B<br/>(ドリンク)]
  C[取りまとめ・<br/>レシート発行]
  D[商品提供<br/>(呼び出し)]

  Z --> A
  Z --> B
  A --> C
  B --> C
  C --> D
```
---

## 画面一覧

| 画面 | 内容 |
|---|---|
| Z | 注文・会計（店員操作） |
| A | 丼商品の作成 |
| B | ドリンク商品の作成 |
| C | 提供前処理（レシート発行・D送信） |
| D | 商品提供（呼び出し・完了） |

---

## Z：注文画面（会計）

店員が商品選択と会計を行う画面。  
**1会計＝1注文**として扱い、  
**会計キー押下時点で注文データが確定・保存**される。

### 主な要素
- **テンキー**  
  商品数や金額の入力に使用する。

- **IN / OUT / 会計キー**  
  - 上段IN/OUT → 会計キー：店内／持ち帰りを確定して会計開始  
  - 下段IN/OUT：押した時点で会計を開始

- **タブ**  
  商品カテゴリ切替（丼・ドリンク・クーポンなど）。

- **商品一覧**  
  商品の画像と名称を表示し、押下で選択できる。

- **モード変更**  
  一般、クリアランス指定、値段表示など（今後拡張予定）。

---

## A・B：商品作成画面

注文された商品を担当ごとに作成する画面。

- **A：丼商品の作成**
- **B：ドリンク商品の作成**

作成場所ごとに対応商品を表示し、  
作成完了ボタンを押すと一覧から消える。

※ 画面上では消えるが、**注文データはDBに保持**される。

---

## C：取りまとめ・レシート発行画面

**すべての注文が必ず通過する提供前処理画面**。

### C画面の役割
- **注文内容すべてを含んだレシートを発行**
- **提供工程（D）へ注文を送る**
- 処理後、注文は **C画面から消える**

### 取りまとめの考え方
- 丼（A）がある注文  
  → 丼の取りまとめ・確認を行う
- **Bのみ / cook=false（作らず出せる商品）の注文**  
  → 取りまとめは行わない  
  → ただし **レシート発行とD送信は必ず行う**

---

## D：商品提供（呼び出し）

C処理が完了した注文が表示される画面。  
**注文番号のみを大きく表示**する。

### 操作仕様（2段階）
1. **1回押す**  
   → 注文番号を呼び出す（呼び出し済み状態）
2. **もう1回押す**  
   → 提供済みとして表示から消える（完了）

※ 呼び出しは1回のみで、再呼び出しは行わない。

---

## 注文番号について

- 注文番号は **店員・客が分かりやすい表示用番号**
- 形式：`0123`
- **システム内部では id を主に使用**し、  
  注文番号の重複は許容する

---

## 設計ドキュメント（SPEC.md について）

本リポジトリには、READMEとは別に **SPEC.md** を用意している。

README では  
- システム全体の概要  
- 画面構成とオペレーションの流れ  

を中心に説明しているのに対し、  
**SPEC.md では以下を詳細に定義している**。

- 注文データの保持方針（削除しない前提）
- 注文・注文明細・商品マスタのテーブル設計
- 注文の進捗状態（C → D → cool → fin）の定義
- サーバ再起動・障害復帰を想定した状態管理の考え方

実装前に **仕様と設計を文章で整理すること**を重視し、  
「なぜこの構成にしたのか」「どこまでをDBで管理するのか」を  
後から見返せる形でまとめている。

本システムの内部設計や拡張方針を確認する場合は、  
**SPEC.md を参照することで全体像を把握できる構成**となっている。

---

## データ保持方針

- 注文データは **削除しない**
- 提供済みの注文も **すべてDBに保持**
- 日付はシステム側で自動付与し、  
  **1日単位・期間単位の集計**に利用する

### 保存される主な情報
- 注文番号（0123形式）
- 注文日時
- IN / OUT（店内・持ち帰り）
- 商品と数量
- 注文の進捗状態（C処理済み／呼び出し済み／提供済み）

---

## 目的
- 注文から提供までの流れを明確化
- 制作工程の分業を前提としたUI設計
- 店舗オペレーションの効率化
- 将来の売上・在庫管理への拡張

---

## 今後の拡張予定
- 売上管理（注文データ集計）
- 在庫管理
- モード切替機能の拡張
- 分析・履歴表示機能の追加

db/schema.sql を実行すればDB構成を再現できます